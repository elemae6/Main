# CPU 스케줄링   
#### CPU 스케줄링이란?   
- 멀티프로그래밍하는 운영체제의 기반 <img src="https://user-images.githubusercontent.com/81418010/221446345-f01fe4c7-dd17-4597-9813-dbb43843f3ee.png" align="right" height="350px" width="600px">
- 멀티프로그래밍의 목적 : 
  - 가능한 모든 시간에 항상 어떤 프로세스를 실행시키기 위해
  - CPU의 활용도를 최대화하기 위해
  
#### CPU 스케줄러   
- 메모리의 프로세스 중에서 '준비' 상태인 프로세스를 골라서 CPU를 해당 프로세스에 할당한다.

#### 선점형 스케줄링 vs 비선점형 스케줄링
- 비선점형 스케줄링 : 
  - 프로세스가 CPU를 선점하면 그 프로세스가 종료되거나 대기 상태로 변경되는 등 자발적으로 나올 때까지 계속 기다린다.
- 선점형 스케줄링 : 
  - 프로세스가 CPU를 선점해도 쫓아낼 수 있다.  
   
#### CPU 스케줄링의 의사 결정   
- 프로세스가 실행 -> 대기    (비선점형 스케줄링하면 된다)
- 프로세스가 실행 -> 준비    (선점형 또는 비선점형 스케줄링; 보통 성능을 위해 선점형한다)
- 프로세스가 대기 -> 준비    (선점형 또는 비선점형 스케줄링; 보통 성능을 위해 선점형한다) (대기큐에서 준비큐를 갈 때 준비큐에 있는 우선순위를 제치고 먼저 실행될 수도 있다)
- 프로세스가 종료            (비선점형 스케줄링하면 된다)

#### 디스패처란?
- CPU 스케줄러에 선택된 프로세스에 직접 CPU 코어의 제어권을 주는 역할을 한다
- 해야할 일을 정하는 것까지가 스케줄러의 일, 실제로 CPU를 프로세스에 할당하는 것이 디스패처의 일
- 넓게 보면 스케줄링은 스케줄러와 디스패처의 기능을 동시에 말한다
- 디스패처의 기능 :
  - 프로세스의 문맥교환
  - 사용자 모드로 변경
  - 사용자 프로세스의 적당한 위치로 옮기는 기능
- 결국, 문맥 교환마다 디스패처가 일을 한다.
- 디스패처 지연시간이란?
  - 한 프로세스를 멈추고 다른 프로세스를 실행하는 시간

#### CPU 스케줄링의 기준   
- CPU 활용도 : CPU를 가능한 바쁘게 하기
- 처리량(throughput) : 단위 시간 당 완료한 프로세스를 최대로 늘리기
- turnaround 시간 : 프로세스를 실행하는 데 걸리는 시간 (프로세스를 제출한 후 완료될 때까지 시간)을 최대한 줄이기
- (중요) 대기 시간 : 프로세스가 레디 큐에서 보내는 시간을 줄여서 프로세스들이 레디큐에서 대기한 시간의 합을 최대한 줄이기   
  - 대기 시간이 짧아지면 자연스럽게 CPU 활용도, 처리량도 늘어나고, turnaround도 줄어든다.
- 응답 시간 : 응답하는 데 걸리는 시간을 줄이기 (UI의 경우, 마우스 클릭 응답 시간 줄이기)

#### CPU 스케줄링 문제   
- 레디 큐에 있는 프로세스 중에 어느 프로세스를 CPU의 코어에 할당할 지 정해야 한다.

#### CPU 스케줄링 해결책 
- FCFS: First- Come, First- Serverd
- SJF : Shortest Job First (SRTF : Shortest Remaining Time first)
- RR : Round-Robin
- Priority-based
- MLQ : Multi-level Queue
- MLFQ : Multi-level Feedback Queue

#### FCFS 스케줄링   
- First-Come, First-Served: 가장 단순한 CPU 스케줄링 알고리즘
- CPU에 요청을 먼저 보낸 프로세스부터 CPU에 할당한다
- FIFO 큐로 쉽게 구현 가능   
- FCFS로 구현할 때의 평균 대기 시간은 CPU burst시간이 제각기 크게 차이난다면 전반적으로 최소값이 아니고 상당히 다양하게 나타난다.
- 비선점형 스케줄링이다.
- 역동적인 예) CPU-bound 프로세스 한 개와 다양한 I/O-bound 프로세스가 있을 때 호송 효과(똥차 효과)가 나타난다.
  - 호송효과 (똥차 효과)란?
   -  한 개의 큰 프로세스를 기다리기 위해 다른 프로세스들이 CPU를 선점하기 위해 기다린다
   -  결국 다른 짧은 프로세스들이 먼저 CPU를 선점이 가능하도록 할 때보다 CPU와 장치의 활용도가 줄어든다.
   -  똥차 효과 : 마치, 느린 똥차 한대가 가로막아서 뒤에 여러 대의 스포츠카들도 따라서 느려진다

#### SFJ 스케줄링   
- Shortest-Job-First : shortest-next-CPU-burst-first scheduling   
- SFJ는 각 프로세스의 다음 CPU 버스트 시간과 관련있다.
- CPU가 선점이 가능하면 프로세스 중에서 가장 다음 CPU 버스트 시간이 짧은 프로세스를 할당한다.
- 만약 다음 CPU 버스트 시간이 같은 프로세스가 여러개 있으면 FCFS로 먼저 들어온 것을 할당한다.
- 
     




- 
 




   
