# 쓰레드   
#### 쓰레드란?   
- 쓰레드는 가벼운 프로세스 <img src="https://user-images.githubusercontent.com/81418010/221343341-1d359857-4fd2-40f3-9d76-77eed33f9fb8.png" height="300px" width="400px" align="right">
- CPU 활용의 기본 단위
- 구성 요소 : 쓰레드 ID, program counter, 레지스터 세트, 스택

- 멀티스레딩(multithreading) 의 동기 (웹 서버와 같은 클라이언트-서버 시스템 예시)
 1. 클라이언트가 서버로 요청을 보낸다.
 2. 서버가 요청에 응답하기 위한 쓰레드를 추가로 생성한다.
 3. 서버는 다시 클라이언트의 추가 요청이 있는지 대기한다.
- multithreading 프로그래밍의 장점
  - 응답성 : 프로세스가 블로킹 되어도 병렬로 프로세스를 기다릴 필요없이 바로 응답하여 실행할 수 있다.
  - 자원 공유 : 프로세스 간의 자원 공유(데이터 공유, 메시지 교환)보다 간단하게 이뤄진다.
  - 경제성 : 멀티 프로세싱과 달리 프로세스를 복제 안하고, 문맥 교환도 안하여 경제성이 좋다
  - 확장성 : 멀티프로세서에서도 쓰레드를 붙여서 병렬처리가 가능하다.   
`멀티스레딩 배우려고 멀티 프로세싱을 먼저 배웠다고 해도 과언이 아니다.`  
<img src="https://user-images.githubusercontent.com/81418010/221343411-2a84b585-c66e-415d-81da-2a7f55c2dd06.png" height="200px" width="400px" align="right">   

#### 멀티코어 프로그래밍   
- 멀티코어 시스템 내 멀티스레딩
  - 향상된 동시 실행을 통해 여러개의 코어를 더 효율적으로 사용
  - 예 : 싱글 코어 : 쓰레드가 시분할 되어 사이사이 껴서 실행된다.(interleave)
  -      멀티 코어 : 여러 개의 쓰레드가 병렬적으로 실행된다.
- 멀티코어 시스템 내 프로그래밍 도전 과제
  - 테스크(일)의 확인 : 독립되어서 병행 가능한 일을 나눌 수 있는 영역을 찾는 작업이 필요하다.
  - 균형 : 병렬로 실행될 수 있는 테스크(일)을 기여도가 균등하게 나눠준다. (한 쓰레드에 기여도가 쏠리지 않게)
  - 데이터 분리 : 개별 코어에 실행할 수 있게 데이터도 분리가 가능해야 한다.
  - 데이터 종속성 : 데이터 종속성에 관한 문제가 생기지 않게 동기화를 처리
  - 시험 및 디버깅 : 싱글 스레드에 비해 시험 및 디버깅하기 어려워진다. 한 개의 쓰레드의 브레이크 포인트를 잡아도 다른 쓰레드가 어디까지 실행되는지 찾기 어려워진다.

#### 멀티쓰레딩 모델   
- 쓰레드의 종류 : 사용자 쓰레드, 커널 쓰레드
 - 사용자 쓰레드 : 커널의 도움 없이 사용자 모드에서 사용하는 쓰레드
 - 커널 쓰레드 : 운영체제가 직접 운영하는 쓰레드
- 사용자 쓰레드와 커널 쓰레드 사이 관계
 - 다 대 일
 - 일 대 일
 - 다 대 다
- 쓰레드 라이브러리는 쓰레드 생성 및 운영에 관한 API를 제공한다.
 - 예: POSIX Pthreads(Linux 용), Windows thread, Java thread 

#### 암묵적 쓰레딩   
- 동시 실행하며 병행적인 앱을 응용 프로그래머들이 개발하기 너무 어려워서 어려운 부분을 컴파일러나 런타임 라이브러리(ex.Java.util.concurrent)에 전가한다.
- 암묵적 쓰레딩을 사용 예시
 - 쓰레드 풀, Fork & Join, OpenMp, Grand Central Dispatch (Apple용)
